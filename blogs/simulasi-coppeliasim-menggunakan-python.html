<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- OGP (https://ogp.me/) -->
    <meta property="og:site_name" content="f4r4w4y"/>
    <meta property="og:description" content="Siapa coba yang mau ngoding didalem simulasi ¬Ø\\_(„ÉÑ)_/¬Ø a.k.a API FTW"/>
    <meta property="og:title" content="simulasi coppeliasim menggunakan python"/>
    <meta property="og:type" content="blog"/>
    <meta property="og:url" content="https://fakhrip.github.io/blogs/simulasi-coppeliasim-menggunakan-python.html" />
    <meta property="og:image" content="https://media.discordapp.net/attachments/670439298058813442/807173134200864768/characterssss.png" />

    <link href="https://fonts.googleapis.com/css?family=Fira+Code|Press+Start+2P|Bitter:wght@700|Raleway:ital,wght@0,400;0,700;1,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/tag.css">
    <link rel="stylesheet" href="/base.css">
    <link rel="stylesheet" href="/native.css">
    <link rel="apple-touch-icon" href="../favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="512x512"  href="../favicon/android-chrome-512x512.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="../favicon/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../favicon/favicon-16x16.png">
    <link rel="manifest" href="../favicon/site.webmanifest">

    <title>f4r4w4y</title>
</head>
<body>

    <div class="fullscreen-bg">
        <img src="/pictures/bg1.jpg" alt="full-bg">
    </div>

    <div class="small-left-top-term">
        <div class="container">
            <h3 class="fullname">Muhammad Fakhri Putra <br> Supriyadi</h3>

            <h5 class="text">    
                [fai@f4r4w4y blogs]$ <span style="font-weight: normal">tldr ./simulasi-coppeliasim-menggunakan-python.md</span>
                <ul style="list-style-type: none;">
                    <li>
                        TL;DR <p>Siapa coba yang mau ngoding didalem simulasi ¬Ø\<em>(„ÉÑ)</em>/¬Ø a.k.a API FTW</p>

                    </li>
                </ul>
            </h5>
        </div>
    </div>

    <div class="small-left-bottom-term">
        <div class="container">
            <h5 class="text">    
                [fai@f4r4w4y blogs]$ <span style="font-weight: normal">tags ./simulasi-coppeliasim-menggunakan-python.md</span>
                <ul style="list-style-type: none;">
                    <li>
                        <div class="tags-container">
                            
                            <span class="tag" id="python">
                                PYTHON
                            </span>
                            
                            <span class="tag" id="programming">
                                PROGRAMMING
                            </span>
                            
                            <span class="tag" id="robotics">
                                ROBOTICS
                            </span>
                            
                        </div>
                    </li>
                </ul>
            </h5>

            <h5 class="text">    
                [fai@f4r4w4y blogs]$ <span style="font-weight: normal">timing ./simulasi-coppeliasim-menggunakan-python.md</span>
                <ul style="list-style-type: none;">
                    <li>
                        Estimated <p>5 mins read + 15 more mins if you want to do it + undefined mins if there are some error involved üòù</p>

                    </li>
                </ul>
            </h5>

            <h5 class="text">    
                [fai@f4r4w4y blogs]$ <span style="font-weight: normal">articlelastupdated ./simulasi-coppeliasim-menggunakan-python.md</span>
                <ul style="list-style-type: none;">
                    <li>
                        Last updated on October 28, 2020 at 04:24:57
                    </li>
                </ul>
            </h5>
        </div>
    </div>

    <div class="full-term">
        <div class="container text">
            <h5 class="text">
                [fai@f4r4w4y blogs]$ <span style="font-weight: normal">cd <a class="link underline" href="/blogs.html">..</a></span>
            </h5>

            <h5 class="text">
                [fai@f4r4w4y blogs]$ <span style="font-weight: normal">fancyblogcat <span id="location" style="font-weight: normal"></span></span>
            </h5>

            <hr/>
            <center>
                <span style="font-weight: normal">ÿ®Ÿêÿ≥ŸíŸÖŸê Ÿ±ŸÑŸÑŸéŸëŸ∞ŸáŸê Ÿ±ŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéŸ∞ŸÜŸê Ÿ±ŸÑÿ±ŸéŸëÿ≠ŸêŸäŸÖŸê</span>
            </center>
            <hr/>
            
            <div class="blog-content">
                <h1>Simulasi CoppeliaSim menggunakan Python</h1>

<p>Dikarenakan tubes (tugas besar) sebuah mata kuliah <code>Robotika</code>, saya "terpaksa" untuk mempelajari hal-hal yang berkaitan dengan simulasi robot menggunakan software <a rel="noopener" target="_blank" href="https://www.coppeliarobotics.com/">CoppeliaSim</a> (yang sebelumnya bernama <code>V-REP</code>), walaupun demikian saya tidak merasa dirugikan untuk mempalajari tentang hal ini, karena ternyata ada banyak hal yang menarik yang bisa saya gali lebih dalam mengenai simulasi ini.</p>

<p>Seperti yang dikatakan pada website nya (<code>The robot simulator CoppeliaSim</code>), <code>CoppeliaSim</code> merupakan sebuah software yang dirancang khusus untuk mensimulasikan sistem robot yang telah di modelkan sedemikian rupa.</p>

<p>Akan tetapi, ada beberapa hal yang sangat saya tidak suka mengenai software ini : <br />
- Tampilannya kurang menarik <br />
- Builtin code editor yang sangat tidak baik (atleast, bagi programmer yang sering pake vscode / vim / text editor lainnya) <br />
- Sistem modelling yang tidak enak (menurut saya), karena saya terbiasa membuat 3d modelling pada software semacam blender, dan modelling editor pada software ini kurang baik (sayang, padahal simulasi nya ajib)  </p>

<p>Karena beberapa hal yang sudah saya sebutkan diatas, saya mencari workaround nya agar workflow yang saya gunakan selama pengerjaan tubes nya lebih mudah dan lebih enak, walaupun ada hal yang tidak ada penggantinya seperti sistem modelling nya (saya sudah cari cara import 3d model dari blender ternyata tidak ada yang bisa XD).</p>

<h3>API comes to the rescue</h3>

<p>Bagi yang belum tahu, API (Application Programming Interface) merupakan suatu hal yang bisa menghubungkan antara satu aplikasi dengan aplikasi lainnya, satu service dengan service lainnya, dsb.</p>

<p>Dalam hal ini, API bisa digunakan sebagai sebuah perantara yang menghubungkan antara program Python yang kita buat dengan simulasi pada CoppeliaSim nya, jadi dalam artian lain kita sudah bisa mengeliminasi builtin code editor yang sangat merusak mata wkwk (look at that default light theme editor ü§Æ).</p>

<p>Beruntung bagi kita, dan props to the Coppelia DevTeam, API yang disediakan oleh CoppeliaSim ternyata bukan main bro, mereka bener bener antusias dengan pembuatan API nya (mungkin karena sadar code editor nya jelek wkwk JK), semua tentang API nya bisa dilihat di link berikut ini <a rel="noopener" target="_blank" href="https://www.coppeliarobotics.com/helpFiles/en/b0RemoteApiOverview.htm">https://www.coppeliarobotics.com/helpFiles/en/b0RemoteApiOverview.htm</a>.</p>

<p>Seperti yang bisa dilihat pada link tersebut, mereka membuat API yang bisa diakses oleh banyak bahasa yaitu C++, Python, Java, Matlab dan Lua (amazing isn't it).</p>

<p>Ternyata setelah saya lihat lihat lagi mereka secara spesifik menggunakan sebuah <a rel="noopener" target="_blank" href="https://en.wikipedia.org/wiki/Middleware">middleware</a> bernama BlueZero atau yang mereka singkat dengan <code>b0</code>, yang bisa dilihat disini <a rel="noopener" target="_blank" href="https://github.com/CoppeliaRobotics/bluezero">https://github.com/CoppeliaRobotics/bluezero</a>, mereka bahkan meng-opensource kan semuanya üëè (mantap, nambah resource baru di personal toolbox).</p>

<p>Tanpa basa basi lagi mengenai hal-hal diluar bahasan inti, mari kita fokus bagaimana cara menghubungkan Python dengan CoppeliaSim menggunakan API ini.</p>

<h3>Python Binding (Now we're talking)</h3>

<p>Sebenarnya, semuanya sudah terangkai jelas dalam tutorial yang ada di website nya ini <a rel="noopener" target="_blank" href="https://www.coppeliarobotics.com/helpFiles/en/b0RemoteApiClientSide.htm">https://www.coppeliarobotics.com/helpFiles/en/b0RemoteApiClientSide.htm</a>, akan tetapi saya jabarkan agar lebih mudah dipahami, terkhusus di Python nya.</p>

<p>Berikut steps nya :  </p>

<ol>
<li><p>Install msgpack library pada python dengan menggunakan command berikut.  </p>

<div class="codehilite"><pre><span></span><code>pip install msgpack  
</code></pre></div></li>
<li><p>Copy file-file berikut ini (dari folder tempat instalasi CoppeliaSim nya) kedalam direktori/folder yang diinginkan.</p>

<div class="codehilite"><pre><span></span><code><span class="k">-</span> (folder tempat instalasi CoppeliaSim)/programming/b0RemoteApiBindings/python/b0.py  
<span class="k">-</span> (folder tempat instalasi CoppeliaSim)/programming/b0RemoteApiBindings/python/b0RemoteApi.py  
<span class="k">-</span> (folder tempat instalasi CoppeliaSim)/programming/b0RemoteApiBindings/python/synchronousImageTransmission.py  
<span class="k">-</span> (folder tempat instalasi CoppeliaSim)/scenes/synchronousImageTransmissionViaRemoteApi.ttt   
</code></pre></div>

<p>Untuk OS Windows :  </p>

<div class="codehilite"><pre><span></span><code><span class="k">-</span> (folder tempat instalasi CoppeliaSim)/b0.dll  
<span class="k">-</span> (folder tempat instalasi CoppeliaSim)/boost_(blablabla).dll [ini ada banyak, copy aja semua yang awalnya boost akhirnya .dll]  
<span class="k">-</span> (folder tempat instalasi CoppeliaSim)/libzmq(blablabla).dll  
<span class="k">-</span> (folder tempat instalasi CoppeliaSim)/lz4.dll  
<span class="k">-</span> (folder tempat instalasi CoppeliaSim)/zlib1.dll  
</code></pre></div>

<p>Untuk OS Linux :  </p>

<div class="codehilite"><pre><span></span><code><span class="k">-</span> (folder tempat instalasi CoppeliaSim)/libb0.so  
<span class="k">-</span> (folder tempat instalasi CoppeliaSim)/libzmq.so  
<span class="k">-</span> (folder tempat instalasi CoppeliaSim)/*boost*.so  
</code></pre></div>

<p>Contoh pada linux : <br />
<img src="../pictures/site5/ss-copy.png" alt="ss-copy" /></p></li>
<li><p>Thats it, simple kan wkwk</p></li>
</ol>

<h3>Simulation !!!</h3>

<p><img src="https://media.giphy.com/media/hsg8aefseYKTk2QFkJ/giphy.gif" alt="its-all-a-simulation" /></p>

<p>Untuk mencobanya buka saja software CoppeliaSim nya lalu buka scene yang tadi sudah di copy yang namanya <code>synchronousImageTransmissionViaRemoteApi.ttt</code>.</p>

<p><img src="../pictures/site5/ss-coppeliasim.png" alt="coppeliasim" /></p>

<p>Lalu aktifkan <code>b0RemoteApiServer</code> pada CoppeliaSim nya didalam menu <code>Add-ons &gt; b0RemoteApiServer</code> seperti berikut.</p>

<p><img src="../pictures/site5/ss-menu.png" alt="menu" /></p>

<p>Setelah semua itu selesai, tinggal jalankan contoh program Python yang tadi sudah di copy juga di step sebelumnya yang bernama <code>synchronousImageTransmission.py</code> dengan cara :</p>

<div class="codehilite"><pre><span></span><code>python synchronousImageTransmission.py  
</code></pre></div>

<p>Bila semua berjalan dengan baik, seharusnya sekarang anda bisa melihat pada simulasi nya ada 2 box yang keduanya memperlihatkan gambar dari vision sensor yang ada pada simulasinya.</p>

<p>Bila terjadi error, coba buka file <code>synchronousImageTransmission.py</code> nya, dan ganti <code>b0RemoteApi_pythonClient -&gt; b0RemoteApi_CoppeliaSim_Python</code> dan juga <code>b0RemoteApi -&gt; b0RemoteApiAddOn</code>, lalu coba jalankan kembali program Python nya ini (jangan lupa save dulu XD).</p>

<p>Gambar pada box yang diatas merupakan hasil langsung yang didapat dari vision sensornya, sementara box kedua yang berada dibawahnya mendapatkan gambar dari Python dengan proses berikut.</p>

<div class="codehilite"><pre><span></span><code><span class="k">1.</span> Vision sensor --(mengirim gambar ke)--&gt; Box atas
<span class="k">2.</span> Box atas --(mengirim gambar ke)--&gt; program Python
<span class="k">3.</span> Program Python (menerima gambar)
<span class="k">4.</span> Program Python --(mengirim gambar ke)--&gt; Box bawah
<span class="k">5.</span> Box bawah (menampilkan gambar yang diterima)
</code></pre></div>

<p>Lumayan belibet kan prosesnya, walaupun demikian semuanya berjalan dengan cepat (bisa dilihat dari gambar yang tidak nge-lag pada Box bawah), ini semua berkat BlueZero yang mempercepat proses komunikasi melalui API nya dengan cepat menggunakan sistem <a rel="noopener" target="_blank" href="https://en.wikipedia.org/wiki/Multithreading_(computer_architecture)">multithreading</a>.</p>

<h3>Now what ?</h3>

<p>Karena kita sudah bisa menjalankan seluruh program Python beserta simulasi yang diberikan dari contohnya tadi, kita bisa membuat keseluruhan workflow dengan lebih mudah sekarang.</p>

<p>Untuk program Python nya sebenarnya bisa saya singkat seperti berikut :</p>

<div class="codehilite"><pre><span></span><code><span class="c1"># Import semua hal yang diperlukan</span>
<span class="kn">import</span> <span class="nn">b0RemoteApi</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># Connect ke RemoteApiServer nya </span>
<span class="c1"># ( ingat, untuk b0RemoteApi_pythonClient dan b0RemoteApi menyesuaikan, </span>
<span class="c1">#   bila terjadi error gunakan cara diatas tadi )</span>
<span class="k">with</span> <span class="n">b0RemoteApi</span><span class="o">.</span><span class="n">RemoteApiClient</span><span class="p">(</span><span class="s1">&#39;b0RemoteApi_pythonClient&#39;</span><span class="p">,</span><span class="s1">&#39;b0RemoteApi&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>

  <span class="c1"># --------------------------------------------- #</span>
  <span class="c1"># Disinilah tempat seluruh kodingan anda berada #</span>
  <span class="c1"># --------------------------------------------- #</span>

  <span class="c1"># Stop simulasi bila memang semua sudah selesai</span>
  <span class="n">client</span><span class="o">.</span><span class="n">simxStopSimulation</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">simxDefaultPublisher</span><span class="p">())</span>
</code></pre></div>

<p>Itu versi simple nya yang hanya memperlihatkan cara untuk terhubung dengan simulasi nya, untuk penggunaan API dengan tujuan yang beragam bisa dicari tutorial nya ditempat lain hehe (mungkin saya nanti buat, <strong>"mungkin"</strong>).</p>

<p>Selain tutorial lain, saran saya anda bisa saja lebih mudah dengan melihat dokumentasi nya langsung disini <a rel="noopener" target="_blank" href="https://www.coppeliarobotics.com/helpFiles/en/b0RemoteApi-python.htm">https://www.coppeliarobotics.com/helpFiles/en/b0RemoteApi-python.htm</a>. </p>

<h3>Last word</h3>

<p>Semoga artikel nya mudah dipahami dan menyenangkan, jika memang dirasa bermanfaat silahkan sebarkan kepada yang lainnya agar ilmu nya tidak berhenti disini saja.</p>

<p>Terimakasih kepada Allah SWT dan juga para pembaca disini, semua yang buruk datangnya dari saya dan yang baik hanya datang dari-Nya, mohon maaf bila ada kesalahan üôè.</p>

            </div>

            <br/>
            <hr/>
            <center>
                <span style="font-weight: normal">Comment(s)</span>
            </center>
            <hr/>

            <script src="https://utteranc.es/client.js"
                repo="fakhrip/fakhrip.github.io"
                issue-term="pathname"
                label="blog-post-comment"
                theme="photon-dark"
                crossorigin="anonymous"
                async>
            </script>
        </div>
    </div>
</body>
<script>
    document.getElementById("location").innerHTML = './' + window.location.pathname.substring(window.location.pathname.lastIndexOf('/') + 1);
</script>
</html>