<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link href="https://fonts.googleapis.com/css?family=Fira+Code|Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/base.css">
    <link rel="stylesheet" href="/native.css">

    <title>f4r4w4y</title>
</head>
<body>

    <div class="fullscreen-bg">
        <img src="/pictures/bg1.jpg" alt="full-bg">
    </div>

    <div class="full-term">
        <div class="container text">
            <h5 class="text">
                [fai@f4r4w4y ~]$ cd <a class="link underline" href="/index.html">..</a> 
            </h5>

            <h5 class="text">
                [fai@f4r4w4y ~]$ cat <span id="location" style="font-weight: normal"></span> 
            </h5>

            <div class="blog-content">
                <hr />

<blockquote>
  <p><strong>TL;DR</strong> Sok we atuh cek aja <a target="_blank" href="https://github.com/fakhrip/fakhrip.github.io/tree/development">source code</a> nya sung, jangan lupa di star dan share repo nya kalau bermanfaat :D</p>
</blockquote>

<h1>Mengautomasi pembuatan blog dengan menggunakan <em>PAMDown</em> combo</h1>

<p>Di minggu yang tenang dan sunyi merupakan saat yang tepat untuk selalu meng<em>explore</em> suatu hal yang baru, terlebih lagi akan sangat bagus jika dipakai untuk <em>blogging</em> karena hal ini bukan hanya meningkatkan seni menulis menjadi lebih baik juga bisa membuat CV lebih menarik üòé</p>

<p>Maka dari itu saya akan menyuguhkan satu artikel yang menurut saya sangat menarik bahasannya...</p>

<h3>Kenapa sih automasi automasi terus</h3>

<p>Dikarenakan ini merupakan pertama kalinya saya nge-<em>blog</em> dan saya sangat malas sekali jika harus membuat html pada tiap artikel yang saya buat.</p>

<blockquote>
  <p>ditambah gengsi pake wordpress :v</p>
</blockquote>

<p>Loh, kan udah ada Jekyll / Gatsby / Static Site Generator lainnya ?</p>

<p>Jawabannya ya simpel bukan berarti saya mau "<em>reinventing the wheel</em>" tapi ya iseng aja mau sekalian mempelajari sistem baru sekaligus <em>explore</em> hal hal yang sebelumnya belum saya sentuh</p>

<h3>Jadi, apa itu PAMDown ?</h3>

<p>PAMDown merupakan singkatan yang saya buat buat (biasalah <em>coder</em> kalau lagi iseng wkwk),</p>

<div class="codehilite"><pre><span></span><code>P =&gt; Python (Menggunakan jinja2 dan markdown2)
A =&gt; Github Pages Actions
MDown =&gt; Markdown
</code></pre></div>

<p><a target="_blank" href="https://jinja.palletsprojects.com/en/2.11.x/">Jinja</a> pada python nya sendiri saya pakai sebagai HTML Templating agar bisa memasukkan variable pada python kedalam HTML Template yang sudah saya buat</p>

<p><a target="_blank" href="https://github.com/trentm/python-markdown2">Markdown2</a> nya berguna untuk mengubah blog yang saya tulis menggunakan markdown agar menjadi HTML (dalam bentuk variable pada python) yang nantinya bisa dimasukkan kedalam HTML Template menggunakan jinja</p>

<p>Untuk terakhir <a target="_blank" href="https://github.com/marketplace/actions/github-pages-action">Github Pages Actions</a> sudah jelas saya gunakan agar python script yang dibuat bisa dijalankan pada server github secara otomatis pada saat deployment, yaa bisa dibilang CI/CD kecil kecilan lah</p>

<h3>Talk is cheap, show me the code</h3>

<p>Okee jadi tahapan intinya seperti berikut</p>

<div class="codehilite"><pre><span></span><code>1. Kita akan membuat sebuah HTML Template sebagai dasar HTML yang ingin ditampilkan
2. Lalu kita buat sebuah file markdown yang isinya merupakan sebuah artikel
3. Setelah kedua file tersebut telah siap maka kita buat python script untuk melakukan *magic* nya (seperti yang sudah saya katakan diatas)
4. Terakhir kita setup github actions .yml nya untuk mengautomasi build &amp; deployment pada server github
5. Congratulation new skill acquired, PAMDown Combo ü§£
</code></pre></div>

<p>Let's execute the plan :</p>

<blockquote>
  <p>Contoh kodingan dibawah merupakan versi paling sederhana yang bisa kita buat, teman teman bisa juga melihat yang saya sudah buat pada repository saya, link nya dipaling atas yaa</p>
</blockquote>

<ol>
<li><p>HTML Templating menggunakan Jinja</p>

<p>Kita bisa menggunakan dengan cara paling simple yaitu menggunakan variable yang nanti akan kita berikan melalui python seperti berikut</p>

<div class="codehilite"><pre><span></span><code><span class="n">HTMLTEMPLATE</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;!DOCTYPE html&gt;</span>
<span class="s2">&lt;html lang=&quot;en&quot;&gt;</span>
<span class="s2">&lt;head&gt;</span>
<span class="s2">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span>
<span class="s2">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span>
<span class="s2">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span>
<span class="s2">&lt;/head&gt;</span>
<span class="s2">&lt;body&gt;</span>
<span class="s2">    &lt;div&gt;</span>
<span class="s2">        {{ contents }}</span>
<span class="s2">    &lt;/div&gt;</span>
<span class="s2">&lt;/body&gt;</span>
<span class="s2">&lt;/html&gt;</span>
<span class="s2">&quot;&quot;&quot;</span>
</code></pre></div>

<p>Pada HTML Template tersebut terdapat <code>{{ contents }}</code> yang berarti dia akan meminta contents yang nantinya bisa diberikan oleh python pada kodingan selanjutnya</p></li>
<li><p>Blog pada Markdown File</p>

<p>Sebagai contoh saja kita bisa buat file markdown (blog.md) seperti berikut</p>

<p>```markdown</p>

<h1>Ini judul sangat besar</h1>

<h3>lalu ini sub judul</h3>

<p>Dan disinilah kontennya</p></li>
</ol>

<pre><code>
3. The magic script of python :v

    Disini kita buat sebuah script python yang akan menggunakan kedua file diatas yang sudah kita buat

```python
from jinja2 import Template
import markdown2

HTMLTEMPLATE = """&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div&gt;
        {{ contents }}
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
"""

# Disini kita baca isi dari file markdown nya (blognya)
with open('blog.md', 'r') as f :

    # Lalu kita konversi markdown menjadi html dengan 1 baris berikut
    markdown_yang_telah_dikonversi = markdown2.markdown(f.read())

    # Setelah itu kita masukan markdown yang telah dikonversi menjadi variable `contents` yang akan dimasukkan kedalam HTMLTEMPLATE yang sudah kita buat
    html_akhir = Template(HTMLTEMPLATE).render(contents = markdown_yang_telah_dikonversi)

    # Terakhir kita tulis isi html_akhir kedalam sebuah file yang kita beri nama index.html sebagai html utama dari website kita
    indexFile = open('index.html', 'w')
    indexFile.write(html_akhir)
    indexFile.close()
</code></pre>

<pre><code>Mari berinama file python tersebut `magic.py`
</code></pre>

<ol>
<li><p>Github Pages Actions</p>

<p>Setelah semua file sudah siap, sekarang mari kita buat automasi pada tahap build dan deployment nya (CI/CD)</p>

<p>Kita buat dengan cara membuat repository baru dengan nama <code>username_github_mu.github.io</code></p>

<p><img src="../pictures/site1/github1.png" alt="github-setup-create-repo" /></p>

<p>Gambar diatas terdapat <em>merah-merah</em> error karena saya sudah memiliki repository yang sama</p>

<p>Lalu kita inisialisasi direktori lokal, stage &amp; commit semua file serta push ke server remote github nya dengan cara (dan jangan lupa kita harus push ke branch yang baru disini saya buat <code>development</code>, alasannya akan saya kasih tau lebih lanjut dibawah)</p>

<div class="codehilite"><pre><span></span><code><span class="nb">cd</span> <span class="o">[</span>folder projek nya<span class="o">]</span>
git init
git add -A
git commit -m <span class="s1">&#39;first commit&#39;</span>
git checkout -b development
git push origin development
</code></pre></div>

<p>Lalu kita harus setup default branch nya ke branch baru yang tadi kita sudah buat seperti berikut</p>

<p><img src="../pictures/site1/github2.png" alt="github-setup-change-default-branch" /></p>

<p>Setelah itu kita bisa membuat file <code>gh-pages.yml</code> pada folder <code>.github/workflows/</code> di direktori projek nya seperti berikut</p>

<pre><code>name: Automasi build dan deploy

on:
push:
    branches:
    - development  # default branch

jobs:
build_and_deploy:
    runs-on: [ubuntu-latest]
    steps:
    - uses: actions/checkout@v2

    - name: Setup Python
        uses: actions/setup-python@v2
        with:
        python-version: '3.x'

    - name: Install dependencies
        run: pip install jinja markdown2

    - name: Run magic script
        run: python magic.py

    - name: Deploy site
        uses: peaceiris/actions-gh-pages@v3
        with:
        github_token: ${{ secrets.PERSONAL_TOKEN }}
        publish_dir: ./
        publish_branch: master  # deploying branch
</code></pre>

<p>Jika semua sudah komplit sekarang <em>last but not least</em></p>

<p>Kita buat personal token yang akan kita jadikan sebuah secret yang nantinya akan digunakan oleh file automasi .yml nya seperti berikut</p>

<p><img src="../pictures/site1/github3.png" alt="github-setup-create-personal-token" /></p>

<p><img src="../pictures/site1/github4.png" alt="github-setup-create-secret-token" /></p>

<p>Setelah semuanya selesai lalu masuklah tahap akhir yaitu kita commit perubahan terakhir nya dan kita push dengan cara</p>

<div class="codehilite"><pre><span></span><code>git add -A
git commit -m <span class="s1">&#39;second commit&#39;</span>
git push origin development
</code></pre></div>

<p>Lalu secara otomatis web kamu akan tersedia di link <code>https://username_github_mu.github.io</code></p></li>
<li><p>CONGRATS, you have master the PAMDown combo</p></li>
</ol>

<h3>Last word</h3>

<p>Semoga artikel nya mudah dipahami dan menyenangkan, jika memang dirasa bermanfaat silahkan sebarkan kepada yang lainnya agar ilmu nya tidak berhenti disini saja</p>

<p>Terimakasih, mohon maaf bila ada kesalahan üôè</p>

            </div>
        </div>
    </div>
</body>
<script>
document.getElementById("location").innerHTML = '~' + window.location.pathname;
</script>
</html>